{% extends 'base.html' %}
{% block title %} Dashboard {% endblock %}

{% block content %}
{% load filter_extras %}
{% load static %}
{% block css %}
  <link rel="stylesheet" href="{% static 'css/pricing.css' %}">
{% endblock %}
<div class="page-title-wrap">
    <div class="container">
        <h1 class="page-title">Dashboard</h1>
    </div>  
  </div>
<div class="container dashboard-intro">
  <div class="row card-panel">
   <div class="col l4 m4 s12">
      <h6>Welcome back, </h6>
      <h5 class="blue-paypal-text"> {{request.user.first_name}} {{request.user.last_name}}</h5>
  </div>
  <div class="col l5 m5 s12">
    {% if product_count == 1 and valid == False %}
    <h6 class="inline">You are currently checking <span class="count"> {{product_count}}</span> product for indexation</h6>
    
    <h6>You have 4 products left on your free trial.</h6>

    <h6><a href="{% url 'dashboard_upgrade' %}" class="">Upgrade here </a>to a premium plan for just $10/month and receive unlimited products!</h6>
    {% elif product_count == 1 and valid == True %}

    <h6 class="inline">You are currently checking <span class="count"> {{product_count}}</span> product for indexation</h6>

    {% elif product_count > 1 and product_count < 5 and valid == False %}

     <h6 class="inline">You are currently checking<span class="count"> {{product_count}}</span> products for indexation</h6>
    {% with 5|substract:product_count as remaining %} 
    <h6 class="inline">You have</h6>
    <h6 class="blue-paypal-text inline"> &nbsp{{ remaining }}&nbsp </h6>
    <h6 class="inline">product{{ remaining|pluralize:",s" }} left on your free trial.</h6>
    <h6><a href="{% url 'dashboard_upgrade' %}" class="">Upgrade here </a>to a premium plan for just $10/month and receive unlimited products!</h6>
    {% endwith %}
    
    {% elif product_count > 1 and product_count < 5 and valid == True %}

    <h6 class="inline">You are currently checking<span class="count"> {{product_count}}</span> products for indexation</h6>

    {% elif product_count >= 5 and valid == False %}

     <h6 class="inline">You are currently checking <span class="count"> {{product_count}} </span> products for indexation</h6>
    <h6> You don't have any more left on your free trial. 
    {% elif product_count >= 5 and valid == True %}
    <h6 class="inline">You are currently checking </h6><h6 class="blue-paypal-text inline">&nbsp {{product_count}}</h6><h6 class="inline"> &nbsp products for indexation</h6>
    {% endif %}
    <input type="text" id="search-criteria" onkeyup="search()" placeholder="Search by name or ASIN">
    </div>  
    <div class="col l3 m3 s12 offset-l1 offset-m1">
      <div class="add-product">
      {% if product_count >= 5 and valid == False %}
      <a href="{% url 'dashboard_upgrade' %}" class="btn-large waves-light waves-effect orange btn-block btn right-move">
      Upgrade Account
      </a>
      {% else %}
         <a href="{% url 'products_add_product' %}" class="btn-large waves-light waves-effect green btn-block btn right-move">
        + Add product
      </a>
      {% endif %}
   
      </div>
    </div>
  </div>
</div>
<div class="products-wrapper">
  <div class="container">
      <div class="row products-title">
          <h3>Products</h3>
      </div>
  <div class="row products">
  {% for product in products %}
  <div id="{{product.pk}}" class="product col s12 m6 l3 cursor" onclick="window.document.location='/product/overview/{{product.uuid}}'">
    <div class="product-image waves-effect waves-block waves-light">
      <a href="{% url 'products_overview_product' product.uuid %}">
      <img class="responsive-img"  src="{{product.primary_img}}">
      </a>
    </div>
    <div class="product-content">
      <div class="card-title">
        <a href="{% url 'products_overview_product' product.uuid %}">
        <span data-product="{{product.pk}}" class="searchable">{{product.product_name}}</span>  
        </a>
      </div>
      <div class="product-indexing center">
        <span data-product="{{product.pk}}" class="center searchable product-asin">ASIN: {{product.asin}}</span>
         <p class="btn-flat blue-paypal white-text">Indexing: {{product.indexing}}</p>
      </div>
    </div>
  </div>
  {% endfor %}
  {% if products|length == 0 %}
  <br>
  {% endif %}
</div>
</div>
</div>
<!-- Modal Structure -->
<div id="modal1" class="modal">
  <div class="modal-content">
    <h4 class="center center-justify">Select Your Plan</h4>
    
      <div class="demo-container">
        <div class="card-wrapper"></div>

        <div class="form-container active">
            <form method="post" id="payment-form" data-settings-url="{% url 'stripe_charge' %}" data-coupon-url="{% url 'stripe_check_coupon' %}"
            data-stripe-key="{{ key }}"
            >
              {% csrf_token %}
            <div class="row">
              <div class="show-on-small hide-on-med-and-up">
                <select id="mobile-stripe" class="browser-default">
                  <option value="" disabled selected>Choose your Plan</option>
                  <option value="Monthly">Monthly ($10) </option>
                  <option value="Yearly">Yearly ($100)</option>
                </select>
              <a id="mobile-signup" class="show-on-small btn-large waves-effect waves-light blue-paypal btn-block">Next</a>
              </div>
              <div id="DIV_1" class="data-monthly col l6 offset-l1 hide-on-small-only">
                <div id="DIV_3">
                  <div id="DIV_4">
                    <div id="DIV_5">
                    </div>
                    <div id="DIV_6">
                      <div id="DIV_7">
                        <h2 id="H2_8">
                          <span id="SPAN_9"><span id="SPAN_10">$10 Monthly</span></span>
                        </h2>
                      </div>
                      <div id="DIV_11">
                        <h6 id="H6_12">
                          <span id="SPAN_13">Plan</span>
                        </h6>
                      </div>
                    </div>
                  </div>
                  <div id="DIV_14">
                    <h6 id="H6_15">
                      <span id="SPAN_16">Unlimited ASINs</span>
                    </h6>
                    <h6 id="H6_17">
                      <span id="SPAN_18"><span id="SPAN_19"></span></span>
                    </h6>
                    <h6 id="H6_20">
                      <span id="SPAN_21">Daily listing notifications</span>
                    </h6>
                    <h6 id="H6_22">
                      <span id="SPAN_23"><span id="SPAN_24"></span></span>
                    </h6>
                    <h6 id="H6_25">
                      <span id="SPAN_26">Free setup guidance</span>
                    </h6>
                    <h6 id="H6_27">
                      <span id="SPAN_28"><span id="SPAN_29"></span></span>
                    </h6>
                    <h6 id="H6_30">
                      <span id="SPAN_31">Eligible for promotions</span>
                    </h6>
                    <h6 id="H6_32">
                      <span id="SPAN_33"><span id="SPAN_34"></span></span>
                    </h6>
                    <h6 id="H6_35">
                      <span id="SPAN_36">No expiration period</span>
                    </h6>
                  </div>
                  <div id="DIV_37">
                    <div id="DIV_38">
                    </div>
                  </div>
                  <div id="DIV_39">
                    <div id="DIV_40">
                    </div>
                  </div>
                  <div id="DIV_41">
                    <div id="DIV_42">
                    </div>
                  </div>
                </div>
            </div>
            <div id="pricing_DIV_1" class="data-yearly col l6 offset-l1 hide-on-small-only">
              <div id="pricing_DIV_3">
                <div id="pricing_DIV_4">
                  <div id="pricing_DIV_5">
                  </div>
                  <div id="pricing_DIV_6">
                    <div id="pricing_DIV_7">
                      <h2 id="pricing_H2_8">
                        <span id="pricing_SPAN_9"><span id="pricing_SPAN_10">$100 Anually</span></span>
                      </h2>
                    </div>
                    <div id="pricing_DIV_11">
                      <h6 id="pricing_H6_12">
                        <span id="pricing_SPAN_13">Plan</span>
                      </h6>
                    </div>
                  </div>
                </div>
                <div id="pricing_DIV_14">
                  <h6 id="pricing_H6_15">
                    <span id="pricing_SPAN_16">Unlimited ASINs</span>
                  </h6>
                  <h6 id="pricing_H6_17">
                    <span id="pricing_SPAN_18"><span id="pricing_SPAN_19">​</span></span>
                  </h6>
                  <h6 id="pricing_H6_20">
                    <span id="pricing_SPAN_21">Daily listing notifications</span>
                  </h6>
                  <h6 id="pricing_H6_22">
                    <span id="pricing_SPAN_23"><span id="pricing_SPAN_24">​</span></span>
                  </h6>
                  <h6 id="pricing_H6_25">
                    <span id="pricing_SPAN_26">Free setup guidance</span>
                  </h6>
                  <h6 id="pricing_H6_27">
                    <span id="pricing_SPAN_28"><span id="pricing_SPAN_29">​</span></span>
                  </h6>
                  <h6 id="pricing_H6_30">
                    <span id="pricing_SPAN_31">Elegible for promotions</span>
                  </h6>
                  <h6 id="pricing_H6_32">
                    <span id="pricing_SPAN_33"><span id="pricing_SPAN_34">​</span></span>
                  </h6>
                  <h6 id="pricing_H6_35">
                    <span id="pricing_SPAN_36">Save Anually</span>
                  </h6>
                </div>
                <div id="pricing_DIV_37">
                  <div id="pricing_DIV_38">
                  </div>
                </div>
                <div id="pricing_DIV_39">
                  <div id="pricing_DIV_40">
                  </div>
                </div>
                <div id="pricing_DIV_41">
                  <div id="pricing_DIV_42">
                  </div>
                </div>
              </div>
            </div>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
        </div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="row hide-on-small-only">
      <div class="col l6">
          <a class="data-monthly waves-effect waves-green btn-flat blue center" style="width: 100%">Monthly</a>
      </div>
        <div class="col l6 offset-l1">
          <a  class="data-yearly waves-effect waves-green btn-flat blue center" style="width: 100%">Anually</a>
      </div>
    </div>
    <div id="loader" class="row hidden">
      <div class="col center offset-l6">
         <div class="preloader-wrapper active">
          <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div><div class="gap-patch">
              <div class="circle"></div>
            </div><div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </form>
  </div>
</div>
{% endblock %}
{% block js %}
<script src="{% static 'js/search.js' %}"> </script>
<script src="https://js.stripe.com/v3/"></script>
<script src="https://checkout.stripe.com/checkout.js"></script>

<script src="{% static 'js/bin/stripe-checkout.js' %}"></script>
{% endblock %}